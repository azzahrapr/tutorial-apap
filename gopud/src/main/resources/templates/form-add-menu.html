<!DOCTYPE html>
<html xmlns:th="http://www.thymelaf.org" xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="UTF-8">
    <title>Add Menu</title>
    <object th:include="fragments/fragment :: css" th:remove="tag"></object>
    <object th:include="fragments/fragment :: js" th:remove="tag"></object>
    <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/js/bootstrap.min.js"></script>
    <script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
</head>
<body>
<nav th:replace="fragments/fragment :: navbar(title = 'Add Menu')"></nav>
<h3>Tambah Produk</h3>
<form th:action="@{/menu/add}" th:object="${menu}" method="POST">
    <input type="hidden" th:field="*{restoran}"/>
    <!--Nama: <br>-->
    <!--<input type="text" name="nama"/>-->
    <!--<br>-->
    <!--Deskripsi: <br>-->
    <!--<input type="text" name="deskripsi"/>-->
    <!--<br>-->
    <!--Harga: <br>-->
    <!--<input type="number" name="harga"/>-->
    <!--<br>-->
    <!--durasiMasak (menit): <br>-->
    <!--<input type="number" name="durasiMasak"/>-->
    <!--<br>-->
    <table id="menu" class="table order-list">
        <thead>
            <tr>
                <th>Nama</th>
                <th>Harga</th>
                <th>Deskripsi</th>
                <th>Durasi Penyajian</th>
                <th>Aksi</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td class="col-sm-3"><input type="text" name="nama" class="form-control" /></td>
                <td class="col-sm-3"><input type="number" name="harga"  class="form-control"/></td>
                <td class="col-sm-3"><input type="text" name="deskripsi"  class="form-control"/></td>
                <td class="col-sm-3"><input type="time" name="durasiMasak"  class="form-control"/></td>
                <td class="col-sm-2"><a class="deleteRow"></a>
                </td>
            </tr>
        </tbody>
        <tfoot>
            <tr>
                <td colspan="5" style="text-align: left;">
                    <input type="button" class="btn btn-lg btn-block " id="addrow" value="Add Row" />
                </td>
            </tr>
        </tfoot>
    </table>
    <br>
    <button type="submit">Submit</button>
</form>
</body>
</html>

<script>
    $(document).ready(function () {
        var counter = 0;

        $("#addrow").on("click", function () {
            var newRow = $("<tr>");
            var cols = "";

            cols += '<td><input type="text" class="form-control" name="nama' + counter + '"/></td>';
            cols += '<td><input type="number" class="form-control" name="harga' + counter + '"/></td>';
            cols += '<td><input type="text" class="form-control" name="deskripsi' + counter + '"/></td>';
            cols += '<td><input type="time" class="form-control" name="durasiMasak' + counter + '"/></td>';


            cols += '<td><input type="button" class="ibtnDel btn btn-md btn-danger "  value="Delete"></td>';
            newRow.append(cols);
            $("table.order-list").append(newRow);
            counter++;
        });



        $("table.order-list").on("click", ".ibtnDel", function (event) {
            $(this).closest("tr").remove();
            counter -= 1
        });


    });



    function calculateRow(row) {
        var price = +row.find('input[name^="price"]').val();

    }

    function calculateGrandTotal() {
        var grandTotal = 0;
        $("table.order-list").find('input[name^="price"]').each(function () {
            grandTotal += +$(this).val();
        });
        $("#grandtotal").text(grandTotal.toFixed(2));
    }
</script>